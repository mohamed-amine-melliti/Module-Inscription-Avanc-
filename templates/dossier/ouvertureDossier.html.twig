{% extends 'base.html.twig' %}

{% block title %}Hello DossierController!{% endblock %}

{% block body %}

    <head>

        <meta charset="utf-8">
        <meta name="robots" content="noindex, nofollow">

        <meta name="viewport" content="width=device-width, initial-scale=1">


        <script src={{ asset('https://code.jquery.com/jquery-3.5.1.min.js') }}></script>
        <script src={{ asset('https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js') }}></script>
        <script src={{ asset('js/functionsPrincipales.js') }}></script>

        {% block scripts %}

            <script src={{ asset('https://code.jquery.com/jquery-1.10.2.min.js') }}></script>
            <script src={{ asset("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js") }}></script>

        {% endblock %}
    </head>

    <link rel="stylesheet" href={{ asset("css/controlesaisie.css") }}>
    <link rel="stylesheet" href={{ asset("css/popUpAwelMat7el.css") }}>
    <link rel="stylesheet" href={{ asset("css/tandhimLesDivs.css") }}>
    <link rel="stylesheet"
          href={{ asset("https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css") }}>
    <link rel="stylesheet" href={{ asset("https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.3/animate.min.css") }}>

    <div id="pageMessages">
    </div>

    <!-------------------------------------------------------------------->
    <div class="container">

        <div id="myPopupSecteurActiviteFehaOuiWallaNon" class="popup hide">
            <div class="popup-header">
                <span class="close toggle" data-target="myPopupSecteurActiviteFehaOuiWallaNon">close</span>
                <span class="close toggle" data-target="myPopupSecteurActiviteFehaOuiWallaNon">close</span>
            </div>


            <div class="popup-body">

                <div id="msgSecteurActiviteFehaOuiWallaNon">


                </div>
            </div>

            <div class="popup-footer">
                <button id="jsrSecteurActiviteFehaOuiWallaNon" class="toggle button"
                        data-target="myPopupSecteurActiviteFehaOuiWallaNon">oui
                </button>
                <button id="jnsrSecteurActiviteFehaOuiWallaNon" class="toggle button"
                        data-target="myPopupSecteurActiviteFehaOuiWallaNon">non
                </button>
            </div>

        </div>
    </div>

    <!-------------------------------------------------------------->
    <div class="container">

        <div id="myPopupSecteurActivite" class="popup hide">
            <div class="popup-header">
                <span class="close toggle" data-target="myPopupSecteurActivite">close</span>
                <span class="close toggle" data-target="myPopupSecteurActivite">close</span>
            </div>


            <div class="popup-body">
                <div id="msgSecteurActivite">
                </div>
            </div>

            <div class="popup-footer">
                <button id="jsrSecteurActivite" class="toggle button" data-target="myPopupSecteurActivite">oui</button>
                <button id="jnsrSecteurActivite" class="toggle button" data-target="myPopupSecteurActivite">non</button>
            </div>

        </div>
    </div>
    <!-------------------------------------------------------------->
    <div class="container">

        <div id="myPopupFinal" class="popup hide">

            <div class="popup-header">
                <span class="close toggle" data-target="myPopupFinal">close</span>
            </div>


            <div class="popup-body">
                <div id="msgfinalefinale">
                    "Confirmez-vous la création du dossier ? ATTENTION VOUS ÊTES SUR LE POINT DE DECLENCHER VOTRE
                    ABONNEMENT"

                </div>
            </div>

            <div class="popup-footer">
                <button id="jsrfinale" type="submit" onclick="submitForms()" class="toggle button btn btn-primary"
                        data-target="myPopupFinal">Confirmer
                </button>
                <button id="jnsrfinale" class="toggle button" data-target="myPopupFinal">Revenir</button>
            </div>
        </div>
    </div>



    <div class="container">

        <div id="myPopup" class="popup hide">

            <div class="popup-header">
                Message
                <span class="close toggle" data-target="myPopup">close</span>
            </div>

            <div class="popup-body" id="mosalah">
                Vous avez choisi cette option .
                <div id="msg">

                </div>
                êtes-vous sûr ?
            </div>

            <div class="popup-footer">
                <button id="jsr" class="toggle button" data-target="myPopup">Confirmer</button>
                <button id="jnsr" class="toggle button" data-target="myPopup">Revenir</button>
            </div>
        </div>
    </div>
    <!--------------------->

    <div class="container">

        <div id="myPopupCategImposition" class="popup hide">
            <div class="popup-header">
                Message
                <span class="close toggle" data-target="myPopupCategImposition">close</span>
            </div>
            <div class="popup-body" id="">
                Vous avez choisi cette option .
                <div id="msgCategImposition">

                </div>
                êtes-vous sûr ?
            </div>
            <div class="popup-footer">
                <button id="jsrCategImposition" class="toggle button" data-target="myPopupCategImposition">Confirmer
                </button>
                <button id="jnsrCategImposition" class="toggle button" data-target="myPopupCategImposition">Revenir
                </button>
            </div>
        </div>
    </div>
    <!-------------------------------------------------------------------->

    <div class="overlay ">
        <div class="modelBox animated swing">
            <div align="right"><a href="#" class=" btn-close" style="color: red;">X</a></div>
            <div class="mText">

                Afin de commencer à utiliser ALDINI, veuillez compléter les champs suivants pour créer votre dossier

            </div>
        </div>
    </div>

    <!-------------------------------------------------------------------->
    {{ form_start(form , {'attr': {'id': 'dossier','class': 'validate-form ms-5'}}) }}

    <div class=" col-11">
        <div class="card-group">
            <mark>

                <p style="color: red"> ATTENTION ! LES INFORMATIONS RENTREES SUR CETTE PAGE DOIVENT ÊTRE EXACTES ET
                    STRICTEMENT CONFORMES AUX INFORMATIONS
                    MENTIONNEES SUR VOTRE K-BIS ET VOTRE MEMENTO FISCAL
                    CAR ELLES IMPACTENT IRREVERSIBLEMENT VOTRE COMPTABILITE
                    UNE FOIS LES INFORMATIONS VALIDEES SUR CETTE PAGE, LE DOSSIER NE SERA PLUS MODIFIABLE POUR LES
                    CHAMPS AVEC *
                </p>
            </mark>

        </div>
    </div>

    <div class="col-sm-3 mt-4">
        <div class="form-group" style="width: 110%;">
            {{ form_label(form.secteurActivite,"Secteur d'activité" , {'label_attr': {'class' : 'foo'}}) }}
            {{ form_widget(form.secteurActivite,{'attr': {'class': 'form-control'}} ) }}
        </div>
    </div>
    <!-------------------Divs mte3 secteur Activité ---------------------------->
    <div class="col-sm-3" id="lazemTet5abaCafeResto">
        Avec débit de tabac ?
        <div class="form-group" style="width: 110%;">
            <select class="form-control" id="ouinonSecteurActivite">
                <option value=""></option>
                <option value="non">non</option>
                <option onclick="redirect();" value="oui">oui</option>
            </select>
        </div>
    </div>
    <!--------------------------------------------->
    <div class="col-sm-3" id="lazemTet5abaTransportPerso">
        Exercez-vous une activité de taxi sous licence?
        <div class="form-group" style="width: 110%;">
            <select class="form-control" id="ouinonTransportPerso">
                <option value=""></option>
                <option value="oui">oui</option>
                <option value="non">non</option>
            </select>
        </div>
    </div>
    <!--------------------------------------------->
    <div class="col-sm-3" id="lazemTet5abaTransportPersoThenya">
        Exercez-vous une activité de VTC, chauffeur privé ou autre transport collectif de personnes?
        <select class="form-control" id="ouinonTransportPersoThenya" style="width: 110%;">
            <option value=""></option>
            <option onclick="createAlert('Opps!','.','REPONSE INCOHERENTE','danger',true,false,'pageMessages');fasa5KolChaywM3ahaSecteurActivite();"
                    value="non">non
            </option>
            <option onclick="createAlert('Opps!','.','ATTENTION ! VOTRE ACTIVITE ETANT REGLEMENTEE, VOTRE COMPTABILITE NECESSITE UN COMMISSAIRE AUX COMPTES OU, A DEFAUT, UN EXPERT-COMPTABLE POUR LES CAPACITES FINANCIERES A JUSTIFIER AU DREAL','danger',true,false,'pageMessages');"
                    value="oui">oui
            </option>
        </select>
    </div>
    <!--------------------------------------------->
    <div class="col-sm-3" id="lazemTet5abaImmobilier">
        Exercez-vous une activité d'agent immobilier ? (différent d'une activité de SCI)
        <select class="form-control" id="ouinonImmobilier" style="width: 110%;">
            <option value=""></option>
            <option value="non">non</option>
            <option id="matloubaBa3din" value="oui">oui</option>
        </select>
    </div>
    <!--------------------------------------------->
    <div class="col-sm-3" id="lazemTet5abaImmobilierThenya">
        Exercez-vous uniquement une activité d'intermédiaire de vente?
        <select class="form-control" id="ouinonImmobilierThenya" style="width: 110%;">
            <option value=""></option>
            <option value="oui">oui</option>
            <option onclick="createAlert('Opps!','.','DESOLE ! NOUS NE POUVONS PAS TRAITER CETTE ACTIVITE.','danger',true,false,'pageMessages');redirect();"
                    value="non">non
            </option>
        </select>
    </div>
    <!------------------------------------------------------------------------------>


    <div class="col-sm-3 nopadding">
        <div class="form-group" style="width: 110%;">
            <div class="panel panel-default">
                {{ form_widget (form.nomDossier ,{'attr': {' class':'nom-dossier', 'style':'text-transform:uppercase' }}) }}
            </div>
        </div>

        <div class="form-group" style="width: 110%;">
            {{ form_row(form.raisonSociale ,{'attr': {'class': 'form-control', 'style':'text-transform:uppercase',}} ) }}
        </div>


        <div class="form-group" style="width: 110%;">
            {{ form_row(form.formeJuridique ,{'attr': {'class': ' toggle button  form-control' , 'data-target':'myPopup'}} ) }}


            <link rel="stylesheet" href="{{ asset('css/intlTelInput.css') }}">

            <script src="{{ asset('js/intlTelInput.js') }}"></script>


        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_row(form.capitalSocial ,{'attr': {'class': 'form-control'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_label(form.nbAssocies,"Nombre d'associés" , {'label_attr': {'class' : 'foo'}}) }}
            {{ form_widget(form.nbAssocies ,{'attr': {'class': 'form-control'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_row(form.adressSiegeSocial ,{'attr': {'class': 'form-control'}} ) }}

        </div>

        <div id="hediDivMte3codePostale" class="form-group" style="width: 110%;">

            <div style="width: 100%;  float: left; ">

                {{ form_label(form.codePostale) }}
                {{ form_widget(form.codePostale,{'attr': {'class': 'form-control validate '  , 'maxlength':'5' }} ) }}

            </div>


            <div class="input-holder" style="margin-left: 50%; height: 100px;">
                <span class="message" id="messageCodePostale">Un code postal doit inclure 5 chiffres</span>
            </div>


        </div>


        <div id="hediDivMte3Ville" class="form-group" style="width: 110%; margin-bottom: 56px">
            {{ form_label(form.ville) }}
            {{ form_widget(form.ville ,{'attr': {'class': 'form-control', 'style':'text-transform:uppercase'}} ) }}
        </div>


        <div class="form-group" style="width: 110%;">
            <div class="col">
                {{ form_label(form.numeroTel) }}
            </div>

            <div class="form-group" style="width: 110%;">
                {{ form_widget(form.numeroTel ,{'attr': {'class': 'form-control intl-tel-input', 'maxlength':'9', 'onkeyup':'Validate(this.id,"integer");' }} ) }}
            </div>

            <div class="input-holder" style="margin-left: 50%; height: 100px;">
                <span id="messageTel" class="message">Ce numéro de téléphone n'est pas valide</span>
            </div>
        </div>


        <div class="form-group" style="width: 110%;">

            <div style="width: 100%; height: 100px; float: left;">
                {{ form_row(form.adressMail ,{'attr': {'class': 'form-control', 'style':'text-transform:lowercase','type':'mail'}} ) }}
            </div>

            <div class="input-holder" style="margin-left: 50%; height: 100px;">
                <span id="messageMail" class="message">Ceci n'est pas une adresse email valide</span>
            </div>

        </div>

        <div class="form-group" style="width: 110%;">
            <div style="width: 100%; height: 100px; float: left;">
                {{ form_row(form.siret ,{'attr': {'class': 'form-control validate' , 'maxlength':'14' }} ) }}
            </div>

            <div class="input-holder" style="margin-left: 50%; height: 100px;">
                <span id="messagesiret" class="message">Un numéro siret doit inclure 14 chiffre</span>
            </div>
        </div>


        <div class="form-group" style="width: 110%;">

            {{ form_row(form.franchiseEnBaseTva ,{'attr': {'class': ' toggleTVA button  form-control ' , 'data-target':'myPopup'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            <div style="width: 100%; height: 100px; float: left;">
                {{ form_row(form.numeroTVAintracommunaitre ,{'attr': {'class': 'form-control validate', 'maxlength':'13'  }} ) }}
            </div>

            <div class="input-holder" style="margin-left: 50%; height: 100px;">
                <span id="messagenumeroTVAintracommunaitre" class="message">Un numéro TVA intracommunaitre doit étre sous la forme "FR+11 chiffres"</span>
            </div>
        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_row(form.typeImposition ,{'attr': {'class': ' toggleTypeImpo button  form-control' , 'data-target':'myPopup'}} ) }}

        </div>


        <div class="form-group" style="width: 110%;">

            {{ form_row(form.categorieImposition ,{'attr': {'class': ' toggleCategorieImpo button  form-control' , 'data-target':'myPopupCategImposition'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_row(form.regimeMicro ,{'attr': {'class': ' toggleRegMicro button  form-control' , 'data-target':'myPopup'}}) }}

        </div>


        <div class="form-group" style="width: 110%;">

            {{ form_label(form.nomGerant ,'',{'label_attr': {'id': 'foo1',}}) }}
            {{ form_widget(form.nomGerant ,{'attr': {'class': 'form-control', 'style':'text-transform:uppercase'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_label(form.prenomGerant,'',{'label_attr': {'id': 'foo2'}}) }}
            {{ form_widget(form.prenomGerant ,{'attr': {'class': 'form-control'}} ) }}

        </div>

        <div class="form-group" style="width: 110%;">

            {{ form_row(form.capital,{'attr': {'class': 'form-control'}} ) }}

        </div>

        <div class="input-holder" style="margin-left: 50%; height: 100px;">
            <span id="messageCapital" class="message">Ceci n'est pas une chiffre capitale valide</span>
        </div>


    </div>


    <div id="education_fields">

    </div>


    <!------------------------------------------------------------------------>
    <div id="rubrique" class="dynamic-field" id="dynamic-field-1">
        <div class="row">
            <div class="col-sm-3 nopadding">

                <ul class="Cogerants" id="cemenu"
                    data-index="{{ form.coGerant|length > 0 ? form.coGerant|last.vars.name + 1 : 0 }}"
                    data-prototype="{{ form_widget(form.coGerant.vars.prototype)|e('html_attr') }}">
                    {% for Cogerant in form.coGerant %}

                        <li>
                            {{ form_row(Cogerant.nomCogerant,{'attr': {'class': 'form-control', 'style':'text-transform:uppercase'}}) }}
                        </li>

                        <li>
                            {{ form_row(Cogerant.prenomCogerant,{'attr': {'class': 'form-control'}}) }}
                        </li>

                        <li>
                            {{ form_row(Cogerant.participation,{'attr': {'class': 'form-control'}}) }}
                        </li>

                    {% endfor %}

                </ul>
                <button id="ajouterCogerant" type="button" class="add_item_link"
                        data-collection-holder-class="Cogerants">Ajouter co-gérant
                </button>
            </div>
        </div>
    </div>


    <div class="col-sm-3" id="miseAjourSCIakaho">
        Le gérant et co-gérant(s) sont-ils rémunérés ?
        <div class="form-group" style="width: 110%;">
            <select class="form-control" id="ouinonSCIrenumeres">
                <option value=""></option>
                <option value="non">non</option>
                <option onclick="" value="oui">oui</option>
            </select>
        </div>
    </div>


    <div class="col-sm-3" id="miseAjourSCISARL">
        Le gérant et co-gérant(s) sont-ils associés ?
        <div class="form-group" style="width: 110%;">
            <select class="form-control" id="ouinonSCISARL">
                <option value=""></option>
                <option value="non">non</option>
                <option onclick="" value="oui">oui</option>
            </select>
        </div>
    </div>



    <div class="col-sm-3 nopadding">
        <div class="form-group" style="width: 110%;">
            {{ form_label(form.regimeIndependants ,'',{'label_attr': {'id': 'foo3'}}) }}
            {{ form_widget(form.regimeIndependants ,{'attr': {'class': 'form-control'}} ) }}
        </div>
    </div>


    <button id="finalbutton" class="btn btn-primary" data-target="myPopupFinal">Finaliser</button>
    {{ form_end(form) }}

    <!----------------HNE TOUFA ELFORM--------------------------->

    <div class="col-sm-3 nopadding">
        <div class="form-group" style="width: 110%;">
            <div class="input-group">

                <!----<div class="input-group-btn">
                    <button class="btn btn-success" type="button"  onclick="education_fields();"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button>
                </div>--->
            </div>
        </div>
    </div>
    <div class="clear"></div>

    </div>


    <!----------------SAISIE ------------------------------------->

    <script>

        submitForms = function () {
            document.forms[0].submit();
            document.forms[1].submit();
        }

    </script>

    <script>
        const addFormToCollection = (e) => {
            const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

            const item = document.createElement('li');
            item.innerHTML = collectionHolder
                .dataset
                .prototype
                .replace(
                    /__name__/g,
                    collectionHolder.dataset.index
                );

            collectionHolder.appendChild(item);
            addTagFormDeleteLink(item);


            collectionHolder.dataset.index++;

        };
    </script>
    <script>

        document.querySelectorAll('.add_item_link').forEach(btn => {
            btn.addEventListener("click", addFormToCollection)
        });
    </script>

    <script>
        const addTagFormDeleteLink = (item) => {
            const removeFormButton = document.createElement('button');
            removeFormButton.innerText = 'Supprimer cogérant';

            item.append(removeFormButton);

            removeFormButton.addEventListener('click', (e) => {
                e.preventDefault();
                // remove the li for the tag form
                item.remove();
            });
        }
    </script>


    <script>
        document
            .querySelectorAll('ul.Cogerants ')
            .forEach((Cogerant) => {
                addTagFormDeleteLink(Cogerant)
            })

    </script>

    <script type="text/javascript">
        window.alert = function () {
        };
        var defaultCSS = document.getElementById('bootstrap-css');

        function changeCSS(css) {
            if (css) $('head > link').filter(':first').replaceWith('<link rel="stylesheet" href="' + css + '" type="text/css" />');
            else $('head > link').filter(':first').replaceWith(defaultCSS);
        }

        $(document).ready(function () {
            var iframe_height = parseInt($('html').height());
            window.parent.postMessage(iframe_height, 'https://bootsnipp.com');
        });

    </script>
    <script>


        var room = 1;

        function education_fields() {

            room++;
            var objTo = document.getElementById('education_fields')
            var divtest = document.createElement("div");
            divtest.setAttribute("class", "form-group removeclass" + room);
            var rdiv = 'removeclass' + room;
            divtest.innerHTML = '<div class="col-sm-3 nopadding"><div class="form-group" style="width: 110%;"> <input type="text" class="form-control" id="Schoolname" name="Schoolname[]" value="" placeholder="Nom cogerant"></div></div><div class="col-sm-3 nopadding"><div class="form-group" style="width: 110%;"> <input type="text" class="form-control" id="Major" name="Major[]" value="" placeholder="Prenom cogerant"></div></div><div class="col-sm-3 nopadding"><div class="form-group" style="width: 110%;"> <input type="text" class="form-control" id="Degree" name="Degree[]" value="" placeholder="Participation"></div></div><div class="col-sm-3 nopadding"><div class="form-group" style="width: 110%;"><div class="input-group"> <div class="input-group-btn"> <button class="btn btn-danger" type="button" onclick="remove_education_fields(' + room + ');"> <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> </button></div></div></div></div><div class="clear"></div>';

            objTo.appendChild(divtest)
        }

        function remove_education_fields(rid) {
            $('.removeclass' + rid).remove();
        }
    </script>

    <!------------------------------------------------------------->
    <script src={{ asset('js/popUpAwelMat7el.js') }}></script>
    <script src={{ asset('js/miseAjour1-7.js') }}></script>
    <script src={{ asset('js/controleSaisie.js') }}></script>
    <script src={{ asset('js/functions7achtiBehom.js') }}></script>
    <script src={{ asset('js/popUpSecteurActivite.js') }}></script>
    <script src={{ asset('js/multipleCogerant.js') }}></script>
    <!-----------------------------------------API codepostale--------------------------------------- --------------------->

    <script src={{ asset('https://code.jquery.com/jquery-3.1.1.min.js') }}></script>
    <script src={{ asset('https://code.jquery.com/ui/1.12.1/jquery-ui.min.js') }}></script>
    <link rel="stylesheet" href={{ asset("https://code.jquery.com/ui/1.7.3/themes/base/jquery-ui.css") }}>
    <link rel="stylesheet" href={{ asset("css/monstylesheet.css") }}>
    <script src={{ asset('js/VilleAutoComplete.js') }}></script>

    <!------------------------------------------------------------------------------------------------------->

{% endblock %}